<Window x:Class="BatchProcessor.JsonDiff.JsonDiffWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="JSON Diff Comparison" Height="800" Width="1000"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header with Back Button -->
            <Border Grid.Row="0" Background="#27AE60" Padding="15" Margin="0,0,0,15" CornerRadius="5">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Back Button -->
                    <Button Grid.Column="0" x:Name="BtnBack" Content="â¬…" Width="40" Height="40" FontSize="20" 
                            Background="Transparent" Foreground="White" BorderThickness="0" 
                            Click="BtnBack_Click" Cursor="Hand" Margin="0,0,10,0"
                            ToolTip="Back to Mode Selection">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#229954"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <!-- Title -->
                    <StackPanel Grid.Column="1">
                        <TextBlock Text="ðŸ” JSON Diff Comparison" FontSize="22" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="Compare JSON files between reference and latest folders" FontSize="12" Foreground="#ECF0F1" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Folder Selection -->
            <GroupBox Grid.Row="1" Header="ðŸ“ Folder Selection" Margin="0,0,0,10" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="100"/>
                    </Grid.ColumnDefinitions>

                    <!-- Reference Folder -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Reference Folder:" VerticalAlignment="Center" Margin="0,5,0,5"/>
                    <TextBox Grid.Row="0" Grid.Column="1" x:Name="TxtReferenceFolder" Margin="5" Padding="5" VerticalAlignment="Center"/>
                    <Button Grid.Row="0" Grid.Column="2" Content="Browse..." Margin="5" Padding="5" Click="BtnBrowseReference_Click"/>

                    <!-- Latest Folder -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Latest Folder:" VerticalAlignment="Center" Margin="0,5,0,5"/>
                    <TextBox Grid.Row="1" Grid.Column="1" x:Name="TxtLatestFolder" Margin="5" Padding="5" VerticalAlignment="Center"/>
                    <Button Grid.Row="1" Grid.Column="2" Content="Browse..." Margin="5" Padding="5" Click="BtnBrowseLatest_Click"/>

                    <!-- Output Folder -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Output Folder:" VerticalAlignment="Center" Margin="0,5,0,5"/>
                    <TextBox Grid.Row="2" Grid.Column="1" x:Name="TxtOutputFolder" Margin="5" Padding="5" VerticalAlignment="Center"/>
                    <Button Grid.Row="2" Grid.Column="2" Content="Browse..." Margin="5" Padding="5" Click="BtnBrowseOutput_Click"/>
                </Grid>
            </GroupBox>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,10">
                <Button x:Name="BtnCompare" Content="ðŸ” Compare Folders" Width="200" Height="40" FontSize="16" FontWeight="Bold" 
                        Background="#27AE60" Foreground="White" Click="BtnCompare_Click" Margin="5"/>
            </StackPanel>

            <!-- Summary -->
            <GroupBox Grid.Row="3" Header="ðŸ“Š Summary" Margin="0,0,0,10" Padding="10">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="10">
                        <TextBlock Text="Total Files" FontWeight="Bold" FontSize="12" Foreground="#7F8C8D"/>
                        <TextBlock x:Name="TxtTotalFiles" Text="0" FontSize="18" FontWeight="Bold" Foreground="#2C3E50"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="10">
                        <TextBlock Text="Matching" FontWeight="Bold" FontSize="12" Foreground="#7F8C8D"/>
                        <TextBlock x:Name="TxtMatchingFiles" Text="0" FontSize="18" FontWeight="Bold" Foreground="#27AE60"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Margin="10">
                        <TextBlock Text="Different" FontWeight="Bold" FontSize="12" Foreground="#7F8C8D"/>
                        <TextBlock x:Name="TxtDifferentFiles" Text="0" FontSize="18" FontWeight="Bold" Foreground="#E74C3C"/>
                    </StackPanel>

                    <StackPanel Grid.Column="3" Margin="10">
                        <TextBlock Text="Missing in Latest" FontWeight="Bold" FontSize="12" Foreground="#7F8C8D"/>
                        <TextBlock x:Name="TxtMissingInLatest" Text="0" FontSize="18" FontWeight="Bold" Foreground="#F39C12"/>
                    </StackPanel>

                    <StackPanel Grid.Column="4" Margin="10">
                        <TextBlock Text="Missing in Reference" FontWeight="Bold" FontSize="12" Foreground="#7F8C8D"/>
                        <TextBlock x:Name="TxtMissingInReference" Text="0" FontSize="18" FontWeight="Bold" Foreground="#F39C12"/>
                    </StackPanel>
                </Grid>
            </GroupBox>

            <!-- Results Display -->
            <GroupBox Grid.Row="4" Header="ðŸ“‹ Differences" Margin="0,0,0,10" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Saved Files Info -->
                    <StackPanel Grid.Row="0" x:Name="PanelSavedFiles" Visibility="Collapsed" Margin="0,0,0,10">
                        <TextBlock Text="âœ… Diff report saved:" FontWeight="Bold" Foreground="#27AE60" Margin="0,0,0,5"/>
                        <TextBlock x:Name="TxtSavedFiles" TextWrapping="Wrap" FontFamily="Consolas" FontSize="11" Foreground="#2C3E50"/>
                    </StackPanel>

                    <!-- TreeView for Results -->
                    <TreeView Grid.Row="1" x:Name="TreeViewResults" BorderThickness="0">
                        <TreeView.Resources>
                            <Style TargetType="TreeViewItem">
                                <Setter Property="IsExpanded" Value="True"/>
                            </Style>
                        </TreeView.Resources>
                    </TreeView>

                    <!-- Empty State -->
                    <TextBlock Grid.Row="1" x:Name="TxtEmptyState" 
                              Text="Click 'Compare Folders' to start comparison" 
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"
                              Foreground="#95A5A6"
                              FontSize="14"
                              FontStyle="Italic"/>
                </Grid>
            </GroupBox>

            <!-- Log Output -->
            <GroupBox Grid.Row="5" Header="ðŸ“ Log Output" Margin="0,0,0,10" Padding="5">
                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="150">
                    <TextBox x:Name="TxtLog" IsReadOnly="True" TextWrapping="Wrap" 
                             VerticalScrollBarVisibility="Auto" Background="#F8F9FA" 
                             FontFamily="Consolas" FontSize="11" BorderThickness="0"/>
                </ScrollViewer>
            </GroupBox>
        </Grid>
    </ScrollViewer>
</Window>

